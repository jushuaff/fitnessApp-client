{"ast":null,"code":"import{useState,useContext}from'react';import{Form,Button}from'react-bootstrap';import{Navigate,useNavigate}from'react-router-dom';import Swal from'sweetalert2';import UserContext from'../context/UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AddProduct(){const navigate=useNavigate();const{user}=useContext(UserContext);// Input states\nconst[name,setName]=useState(\"\");const[description,setDescription]=useState(\"\");const[price,setPrice]=useState(\"\");function createProduct(e){// Prevent submit event's default behavior\ne.preventDefault();let token=localStorage.getItem('token');fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/products/\"),{method:'POST',headers:{\"Content-Type\":\"application/json\",'Authorization':\"Bearer \".concat(token)},body:JSON.stringify({name:name,description:description,price:price})}).then(res=>res.json()).then(data=>{if(data.message!==\"Product added successfully\"){Swal.fire({icon:'error',title:'Error',text:'Product already exists.'});}else if(data.message===\"Product added successfully\"){setName(\"\");setDescription(\"\");setPrice(0);Swal.fire({icon:'success',title:'Success',text:'Product Creation Successful'}).then(()=>{// Navigate to the products page\nnavigate(\"/products\");});}else{Swal.fire({icon:'error',title:'Error',text:'Something Went Wrong.'});}});}return user.isAdmin===true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5 text-center\",children:\"Add Product\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:e=>createProduct(e),children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Name\",required:true,value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Description\",required:true,value:description,onChange:e=>setDescription(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter Price\",required:true,value:price,onChange:e=>setPrice(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"my-5\",children:\"Submit\"})]})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/products\"});}","map":{"version":3,"names":["useState","useContext","Form","Button","Navigate","useNavigate","Swal","UserContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddProduct","navigate","user","name","setName","description","setDescription","price","setPrice","createProduct","e","preventDefault","token","localStorage","getItem","fetch","concat","process","env","REACT_APP_API_BASE_URL","method","headers","body","JSON","stringify","then","res","json","data","message","fire","icon","title","text","isAdmin","children","className","onSubmit","Group","Label","Control","type","placeholder","required","value","onChange","target","variant","to"],"sources":["D:/ZUITT/B443/b443-csp3-fataek-lim/src/pages/AddProduct.js"],"sourcesContent":["import { useState, useContext } from 'react';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport { Navigate, useNavigate } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport UserContext from '../context/UserContext';\r\n\r\nexport default function AddProduct() {\r\n\tconst navigate = useNavigate();\r\n\tconst { user } = useContext(UserContext);\r\n\r\n\t// Input states\r\n\tconst [name, setName] = useState(\"\");\r\n\tconst [description, setDescription] = useState(\"\");\r\n\tconst [price, setPrice] = useState(\"\");\r\n\r\n\tfunction createProduct(e) {\r\n\t\t// Prevent submit event's default behavior\r\n\t\te.preventDefault();\r\n\r\n\t\tlet token = localStorage.getItem('token');\r\n\r\n\t\tfetch(`${process.env.REACT_APP_API_BASE_URL}/products/`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t'Authorization': `Bearer ${token}`\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tname: name,\r\n\t\t\t\tdescription: description,\r\n\t\t\t\tprice: price\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tif (data.message !== \"Product added successfully\") {\r\n\t\t\t\tSwal.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\ttext: 'Product already exists.'\r\n\t\t\t\t});\r\n\t\t\t} else if (data.message === \"Product added successfully\") {\r\n\t\t\t\tsetName(\"\");\r\n\t\t\t\tsetDescription(\"\");\r\n\t\t\t\tsetPrice(0);\r\n\r\n\t\t\t\tSwal.fire({\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\ttitle: 'Success',\r\n\t\t\t\t\ttext: 'Product Creation Successful'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\t// Navigate to the products page\r\n\t\t\t\t\tnavigate(\"/products\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tSwal.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\ttext: 'Something Went Wrong.'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t(user.isAdmin === true) ?\r\n\t\t\t<>\r\n\t\t\t\t<h1 className=\"my-5 text-center\">Add Product</h1>\r\n\t\t\t\t<Form onSubmit={e => createProduct(e)}>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Name:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Name\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\tonChange={e => setName(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Description:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Description\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={e => setDescription(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Price:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Price\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={price}\r\n\t\t\t\t\t\t\tonChange={e => setPrice(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Button variant=\"primary\" type=\"submit\" className=\"my-5\">Submit</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t</>\r\n\t\t\t:\r\n\t\t\t<Navigate to=\"/products\" />\r\n\t);\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}