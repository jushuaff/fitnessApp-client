{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateProductPage(){const{productId}=useParams();// Get productId from the URL\nconst navigate=useNavigate();const[product,setProduct]=useState({name:'',description:'',price:'',isActive:true});const[loading,setLoading]=useState(true);// Fetch product data from the server when the component mounts\nuseEffect(()=>{// Fetch the product information from the backend using the productId\nfetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/products/\").concat(productId),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))// Add your token if needed\n}}).then(res=>res.json()).then(data=>{if(data.error){Swal.fire({icon:'error',title:'Error fetching product data',text:data.message});setLoading(false);}else{setProduct({name:data.product.name,description:data.product.description,price:data.product.price,isActive:data.product.isActive});setLoading(false);}}).catch(error=>{Swal.fire({icon:'error',title:'Error',text:error.message});setLoading(false);});},[productId]);// Handle input changes\nconst handleChange=e=>{const{name,value}=e.target;setProduct({...product,[name]:value});};// Handle form submission\nconst handleSubmit=e=>{e.preventDefault();fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/products/\").concat(productId,\"/update\"),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(product)}).then(res=>res.json()).then(data=>{if(data.message===\"Product updated successfully\"){Swal.fire({icon:'success',title:'Product Updated Successfully'});navigate('/products');}else{Swal.fire({icon:'error',title:'Update Failed',text:data.message});}}).catch(error=>{Swal.fire({icon:'error',title:'An error occurred',text:error.message});});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show loading indicator while fetching data\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"update-product-page container mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary\",to:\"/products\",children:\"Go Back\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Update Product\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"update-product-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:product.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"description\",name:\"description\",value:product.description,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"price\",name:\"price\",value:product.price,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"isActive\",children:\"Active Status\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",id:\"isActive\",name:\"isActive\",value:product.isActive,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:true,children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:false,children:\"Inactive\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update Product\"})]})]});}","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","Link","Swal","jsx","_jsx","jsxs","_jsxs","UpdateProductPage","productId","navigate","product","setProduct","name","description","price","isActive","loading","setLoading","fetch","concat","process","env","REACT_APP_API_BASE_URL","method","headers","localStorage","getItem","then","res","json","data","error","fire","icon","title","text","message","catch","handleChange","e","value","target","handleSubmit","preventDefault","body","JSON","stringify","children","className","to","onSubmit","htmlFor","type","id","onChange","required"],"sources":["D:/ZUITT/B443/b443-csp3-fataek-lim/src/pages/UpdateProduct.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default function UpdateProductPage() {\r\n    const { productId } = useParams(); // Get productId from the URL\r\n    const navigate = useNavigate();\r\n\r\n    const [product, setProduct] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        isActive: true\r\n    });\r\n\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Fetch product data from the server when the component mounts\r\n    useEffect(() => {\r\n        // Fetch the product information from the backend using the productId\r\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/products/${productId}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}` // Add your token if needed\r\n            }\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n            if (data.error) {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Error fetching product data',\r\n                    text: data.message\r\n                });\r\n                setLoading(false);\r\n            } else {\r\n                setProduct({\r\n                    name: data.product.name,\r\n                    description: data.product.description,\r\n                    price: data.product.price,\r\n                    isActive: data.product.isActive\r\n                });\r\n                setLoading(false);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: error.message\r\n            });\r\n            setLoading(false);\r\n        });\r\n    }, [productId]);\r\n\r\n    // Handle input changes\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setProduct({\r\n            ...product,\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    // Handle form submission\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/products/${productId}/update`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            },\r\n            body: JSON.stringify(product)\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n            if (data.message === \"Product updated successfully\") {\r\n                Swal.fire({\r\n                    icon: 'success',\r\n                    title: 'Product Updated Successfully'\r\n                });\r\n                navigate('/products');\r\n            } else {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Update Failed',\r\n                    text: data.message\r\n                });\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'An error occurred',\r\n                text: error.message\r\n            });\r\n        });\r\n    };\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>; // Show loading indicator while fetching data\r\n    }\r\n\r\n    return (\r\n        <div className=\"update-product-page container mt-5\">\r\n            <div className=\"d-flex\">\r\n                <Link className=\"btn btn-primary\" to={\"/products\"}>Go Back</Link>\r\n                <h2>Update Product</h2>\r\n            </div>\r\n            <form onSubmit={handleSubmit} className=\"update-product-form\">\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"name\">Product Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        id=\"name\"\r\n                        name=\"name\"\r\n                        value={product.name}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"description\">Description</label>\r\n                    <textarea\r\n                        className=\"form-control\"\r\n                        id=\"description\"\r\n                        name=\"description\"\r\n                        value={product.description}\r\n                        onChange={handleChange}\r\n                        required\r\n                    ></textarea>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"price\">Price</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        id=\"price\"\r\n                        name=\"price\"\r\n                        value={product.price}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"isActive\">Active Status</label>\r\n                    <select\r\n                        className=\"form-control\"\r\n                        id=\"isActive\"\r\n                        name=\"isActive\"\r\n                        value={product.isActive}\r\n                        onChange={handleChange}\r\n                    >\r\n                        <option value={true}>Active</option>\r\n                        <option value={false}>Inactive</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-primary\">Update Product</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,SAAS,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAC/D,MAAO,CAAAC,IAAI,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/B,cAAe,SAAS,CAAAC,iBAAiBA,CAAA,CAAG,CACxC,KAAM,CAAEC,SAAU,CAAC,CAAGT,SAAS,CAAC,CAAC,CAAE;AACnC,KAAM,CAAAU,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,CACnCe,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,IACd,CAAC,CAAC,CAEF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACAC,SAAS,CAAC,IAAM,CACZ;AACAoB,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,eAAAH,MAAA,CAAaX,SAAS,EAAI,CACjEe,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAL,MAAA,CAAYM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG;AAC/D,CACJ,CAAC,CAAC,CACDC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACZ,GAAIA,IAAI,CAACC,KAAK,CAAE,CACZ7B,IAAI,CAAC8B,IAAI,CAAC,CACNC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,6BAA6B,CACpCC,IAAI,CAAEL,IAAI,CAACM,OACf,CAAC,CAAC,CACFnB,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,IAAM,CACHN,UAAU,CAAC,CACPC,IAAI,CAAEkB,IAAI,CAACpB,OAAO,CAACE,IAAI,CACvBC,WAAW,CAAEiB,IAAI,CAACpB,OAAO,CAACG,WAAW,CACrCC,KAAK,CAAEgB,IAAI,CAACpB,OAAO,CAACI,KAAK,CACzBC,QAAQ,CAAEe,IAAI,CAACpB,OAAO,CAACK,QAC3B,CAAC,CAAC,CACFE,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAAC,CACDoB,KAAK,CAAEN,KAAK,EAAK,CACd7B,IAAI,CAAC8B,IAAI,CAAC,CACNC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAEJ,KAAK,CAACK,OAChB,CAAC,CAAC,CACFnB,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACN,CAAC,CAAE,CAACT,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAA8B,YAAY,CAAIC,CAAC,EAAK,CACxB,KAAM,CAAE3B,IAAI,CAAE4B,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChC9B,UAAU,CAAC,CACP,GAAGD,OAAO,CACV,CAACE,IAAI,EAAG4B,KACZ,CAAC,CAAC,CACN,CAAC,CAED;AACA,KAAM,CAAAE,YAAY,CAAIH,CAAC,EAAK,CACxBA,CAAC,CAACI,cAAc,CAAC,CAAC,CAElBzB,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,eAAAH,MAAA,CAAaX,SAAS,YAAW,CACxEe,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAL,MAAA,CAAYM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC5D,CAAC,CACDkB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACpC,OAAO,CAChC,CAAC,CAAC,CACDiB,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACZ,GAAIA,IAAI,CAACM,OAAO,GAAK,8BAA8B,CAAE,CACjDlC,IAAI,CAAC8B,IAAI,CAAC,CACNC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,8BACX,CAAC,CAAC,CACFzB,QAAQ,CAAC,WAAW,CAAC,CACzB,CAAC,IAAM,CACHP,IAAI,CAAC8B,IAAI,CAAC,CACNC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,eAAe,CACtBC,IAAI,CAAEL,IAAI,CAACM,OACf,CAAC,CAAC,CACN,CACJ,CAAC,CAAC,CACDC,KAAK,CAAEN,KAAK,EAAK,CACd7B,IAAI,CAAC8B,IAAI,CAAC,CACNC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,mBAAmB,CAC1BC,IAAI,CAAEJ,KAAK,CAACK,OAChB,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CAAC,CAED,GAAIpB,OAAO,CAAE,CACT,mBAAOZ,IAAA,QAAA2C,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AAClC,CAEA,mBACIzC,KAAA,QAAK0C,SAAS,CAAC,oCAAoC,CAAAD,QAAA,eAC/CzC,KAAA,QAAK0C,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACnB3C,IAAA,CAACH,IAAI,EAAC+C,SAAS,CAAC,iBAAiB,CAACC,EAAE,CAAE,WAAY,CAAAF,QAAA,CAAC,SAAO,CAAM,CAAC,cACjE3C,IAAA,OAAA2C,QAAA,CAAI,gBAAc,CAAI,CAAC,EACtB,CAAC,cACNzC,KAAA,SAAM4C,QAAQ,CAAER,YAAa,CAACM,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eACzDzC,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvB3C,IAAA,UAAO+C,OAAO,CAAC,MAAM,CAAAJ,QAAA,CAAC,cAAY,CAAO,CAAC,cAC1C3C,IAAA,UACIgD,IAAI,CAAC,MAAM,CACXJ,SAAS,CAAC,cAAc,CACxBK,EAAE,CAAC,MAAM,CACTzC,IAAI,CAAC,MAAM,CACX4B,KAAK,CAAE9B,OAAO,CAACE,IAAK,CACpB0C,QAAQ,CAAEhB,YAAa,CACvBiB,QAAQ,MACX,CAAC,EACD,CAAC,cAENjD,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvB3C,IAAA,UAAO+C,OAAO,CAAC,aAAa,CAAAJ,QAAA,CAAC,aAAW,CAAO,CAAC,cAChD3C,IAAA,aACI4C,SAAS,CAAC,cAAc,CACxBK,EAAE,CAAC,aAAa,CAChBzC,IAAI,CAAC,aAAa,CAClB4B,KAAK,CAAE9B,OAAO,CAACG,WAAY,CAC3ByC,QAAQ,CAAEhB,YAAa,CACvBiB,QAAQ,MACD,CAAC,EACX,CAAC,cAENjD,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvB3C,IAAA,UAAO+C,OAAO,CAAC,OAAO,CAAAJ,QAAA,CAAC,OAAK,CAAO,CAAC,cACpC3C,IAAA,UACIgD,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,cAAc,CACxBK,EAAE,CAAC,OAAO,CACVzC,IAAI,CAAC,OAAO,CACZ4B,KAAK,CAAE9B,OAAO,CAACI,KAAM,CACrBwC,QAAQ,CAAEhB,YAAa,CACvBiB,QAAQ,MACX,CAAC,EACD,CAAC,cAENjD,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvB3C,IAAA,UAAO+C,OAAO,CAAC,UAAU,CAAAJ,QAAA,CAAC,eAAa,CAAO,CAAC,cAC/CzC,KAAA,WACI0C,SAAS,CAAC,cAAc,CACxBK,EAAE,CAAC,UAAU,CACbzC,IAAI,CAAC,UAAU,CACf4B,KAAK,CAAE9B,OAAO,CAACK,QAAS,CACxBuC,QAAQ,CAAEhB,YAAa,CAAAS,QAAA,eAEvB3C,IAAA,WAAQoC,KAAK,CAAE,IAAK,CAAAO,QAAA,CAAC,QAAM,CAAQ,CAAC,cACpC3C,IAAA,WAAQoC,KAAK,CAAE,KAAM,CAAAO,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnC,CAAC,EACR,CAAC,cAEN3C,IAAA,WAAQgD,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAC,gBAAc,CAAQ,CAAC,EACvE,CAAC,EACN,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}