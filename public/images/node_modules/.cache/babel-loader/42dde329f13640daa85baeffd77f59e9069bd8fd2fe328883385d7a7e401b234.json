{"ast":null,"code":"var _jsxFileName = \"D:\\\\ZUITT\\\\B443\\\\b443-csp3-fataek-lim\\\\src\\\\pages\\\\AddProduct.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport UserContext from '../context/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function AddProduct() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useContext(UserContext);\n\n  // Input states\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [image, setImage] = useState(null); // New state for image\n\n  function createProduct(e) {\n    e.preventDefault();\n    let token = localStorage.getItem('token');\n    let formData = new FormData();\n\n    // Append form data\n    formData.append('name', name);\n    formData.append('description', description);\n    formData.append('price', price);\n    formData.append('image', image); // Append the image file\n\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/products/`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      },\n      body: formData // Send as formData instead of JSON\n    }).then(res => res.json()).then(data => {\n      if (data.message !== \"Product added successfully\") {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: data.message || 'Product already exists.'\n        });\n      } else if (data.message === \"Product added successfully\") {\n        setName(\"\");\n        setDescription(\"\");\n        setPrice(0);\n        setImage(null);\n        Swal.fire({\n          icon: 'success',\n          title: 'Success',\n          text: 'Product Creation Successful'\n        }).then(() => {\n          // Navigate to the products page\n          navigate(\"/products\");\n        });\n      } else {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: 'Something Went Wrong.'\n        });\n      }\n    });\n  }\n  return user.isAdmin === true ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-5 text-center\",\n      children: \"Add Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: e => createProduct(e),\n      encType: \"multipart/form-data\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          placeholder: \"Enter Name\",\n          required: true,\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Description:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          placeholder: \"Enter Description\",\n          required: true,\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"number\",\n          placeholder: \"Enter Price\",\n          required: true,\n          value: price,\n          onChange: e => setPrice(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Image:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"file\",\n          onChange: e => setImage(e.target.files[0]) // Handle file upload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        className: \"my-5\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true) : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/products\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 4\n  }, this);\n}\n_s(AddProduct, \"RRGFXmVpwDZSUoHVqQecCmj96Pg=\", false, function () {\n  return [useNavigate];\n});\n_c = AddProduct;\nvar _c;\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"names":["useState","useContext","Form","Button","Navigate","useNavigate","Swal","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","AddProduct","_s","navigate","user","name","setName","description","setDescription","price","setPrice","image","setImage","createProduct","e","preventDefault","token","localStorage","getItem","formData","FormData","append","fetch","process","env","REACT_APP_API_BASE_URL","method","headers","body","then","res","json","data","message","fire","icon","title","text","isAdmin","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","encType","Group","Label","Control","type","placeholder","required","value","onChange","target","files","variant","to","_c","$RefreshReg$"],"sources":["D:/ZUITT/B443/b443-csp3-fataek-lim/src/pages/AddProduct.js"],"sourcesContent":["import { useState, useContext } from 'react';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport { Navigate, useNavigate } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\nimport UserContext from '../context/UserContext';\r\n\r\nexport default function AddProduct() {\r\n\tconst navigate = useNavigate();\r\n\tconst { user } = useContext(UserContext);\r\n\r\n\t// Input states\r\n\tconst [name, setName] = useState(\"\");\r\n\tconst [description, setDescription] = useState(\"\");\r\n\tconst [price, setPrice] = useState(\"\");\r\n\tconst [image, setImage] = useState(null); // New state for image\r\n\r\n\tfunction createProduct(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tlet token = localStorage.getItem('token');\r\n\t\tlet formData = new FormData();\r\n\r\n\t\t// Append form data\r\n\t\tformData.append('name', name);\r\n\t\tformData.append('description', description);\r\n\t\tformData.append('price', price);\r\n\t\tformData.append('image', image); // Append the image file\r\n\r\n\t\tfetch(`${process.env.REACT_APP_API_BASE_URL}/products/`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Authorization': `Bearer ${token}`\r\n\t\t\t},\r\n\t\t\tbody: formData // Send as formData instead of JSON\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tif (data.message !== \"Product added successfully\") {\r\n\t\t\t\tSwal.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\ttext: data.message || 'Product already exists.'\r\n\t\t\t\t});\r\n\t\t\t} else if (data.message === \"Product added successfully\") {\r\n\t\t\t\tsetName(\"\");\r\n\t\t\t\tsetDescription(\"\");\r\n\t\t\t\tsetPrice(0);\r\n\t\t\t\tsetImage(null);\r\n\r\n\t\t\t\tSwal.fire({\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\ttitle: 'Success',\r\n\t\t\t\t\ttext: 'Product Creation Successful'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\t// Navigate to the products page\r\n\t\t\t\t\tnavigate(\"/products\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tSwal.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\ttext: 'Something Went Wrong.'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t(user.isAdmin === true) ?\r\n\t\t\t<>\r\n\t\t\t\t<h1 className=\"my-5 text-center\">Add Product</h1>\r\n\t\t\t\t<Form onSubmit={e => createProduct(e)} encType=\"multipart/form-data\">\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Name:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Name\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\tonChange={e => setName(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Description:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Description\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={e => setDescription(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Price:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Price\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={price}\r\n\t\t\t\t\t\t\tonChange={e => setPrice(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Image:</Form.Label>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={e => setImage(e.target.files[0])} // Handle file upload\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Button variant=\"primary\" type=\"submit\" className=\"my-5\">Submit</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t</>\r\n\t\t\t:\r\n\t\t\t<Navigate to=\"/products\" />\r\n\t);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}