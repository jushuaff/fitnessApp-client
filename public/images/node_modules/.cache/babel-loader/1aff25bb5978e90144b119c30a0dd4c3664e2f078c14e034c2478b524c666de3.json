{"ast":null,"code":"var _jsxFileName = \"D:\\\\ZUITT\\\\B443\\\\b443-csp3-fataek-lim\\\\src\\\\pages\\\\CartView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useContext, useState } from 'react';\nimport { Container, ListGroup, Button } from 'react-bootstrap';\nimport CartContext from '../context/CartContext'; // Adjust this import according to your context setup\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartView = () => {\n  _s();\n  const {\n    cart,\n    setCart\n  } = useContext(CartContext); // Ensure CartContext is set up correctly\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        const url = `${process.env.REACT_APP_API_URL}/cart/get-cart`;\n        const token = localStorage.getItem('token');\n        console.log('Fetching cart from:', url);\n        console.log('Authorization header:', `Bearer ${token}`);\n        const response = await fetch(url, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`Failed to fetch cart. Status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('Cart data received:', data);\n        if (data.cart) {\n          setCart(data.cart);\n        } else {\n          setCart({\n            cartItems: [],\n            totalPrice: 0\n          });\n        }\n      } catch (error) {\n        console.error(\"Error fetching cart:\", error);\n        Swal.fire({\n          icon: 'error',\n          title: 'Error fetching cart',\n          text: error.message\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchCart();\n  }, [setCart]);\n  const handleRemoveItem = async productId => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/cart/${productId}/remove-from-cart`, {\n        method: 'PATCH',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        setCart(data.updatedCart); // Update the cart in context or state\n        Swal.fire({\n          icon: 'success',\n          title: 'Item removed from cart successfully'\n        });\n      } else {\n        throw new Error(data.message || 'Failed to remove item');\n      }\n    } catch (error) {\n      console.error(\"Error removing item:\", error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error removing item',\n        text: error.message\n      });\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), cart && cart.cartItems && cart.cartItems.length > 0 ? /*#__PURE__*/_jsxDEV(ListGroup, {\n      children: cart.cartItems.map(item => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Product:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 33\n          }, this), \" \", item.productId.name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 81\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Quantity:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 33\n          }, this), \" \", item.quantity, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 76\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Subtotal:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 33\n          }, this), \" \\u20B1\", item.subtotal.toLocaleString(undefined, {\n            minimumFractionDigits: 2\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: () => handleRemoveItem(item.productId),\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 29\n        }, this)]\n      }, item.productId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Your cart is empty.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [\"Total Price: \\u20B1\", cart && cart.totalPrice ? cart.totalPrice.toLocaleString(undefined, {\n        minimumFractionDigits: 2\n      }) : '0.00']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(CartView, \"NMSzXCR14MTM71cvfzcXolqKwaY=\");\n_c = CartView;\nexport default CartView;\nvar _c;\n$RefreshReg$(_c, \"CartView\");","map":{"version":3,"names":["React","useEffect","useContext","useState","Container","ListGroup","Button","CartContext","Swal","jsxDEV","_jsxDEV","CartView","_s","cart","setCart","loading","setLoading","fetchCart","url","process","env","REACT_APP_API_URL","token","localStorage","getItem","console","log","response","fetch","headers","ok","Error","status","data","json","cartItems","totalPrice","error","fire","icon","title","text","message","handleRemoveItem","productId","method","success","updatedCart","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","Item","name","quantity","subtotal","toLocaleString","undefined","minimumFractionDigits","variant","onClick","_c","$RefreshReg$"],"sources":["D:/ZUITT/B443/b443-csp3-fataek-lim/src/pages/CartView.js"],"sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\nimport { Container, ListGroup, Button } from 'react-bootstrap';\nimport CartContext from '../context/CartContext'; // Adjust this import according to your context setup\nimport Swal from 'sweetalert2';\n\nconst CartView = () => {\n    const { cart, setCart } = useContext(CartContext); // Ensure CartContext is set up correctly\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchCart = async () => {\n            try {\n                const url = `${process.env.REACT_APP_API_URL}/cart/get-cart`;\n                const token = localStorage.getItem('token');\n                console.log('Fetching cart from:', url);\n                console.log('Authorization header:', `Bearer ${token}`);\n\n                const response = await fetch(url, {\n                    headers: {\n                        'Authorization': `Bearer ${token}`\n                    }\n                });\n                \n                if (!response.ok) {\n                    throw new Error(`Failed to fetch cart. Status: ${response.status}`);\n                }\n\n                const data = await response.json();\n                console.log('Cart data received:', data);\n\n                if (data.cart) {\n                    setCart(data.cart);\n                } else {\n                    setCart({ cartItems: [], totalPrice: 0 });\n                }\n            } catch (error) {\n                console.error(\"Error fetching cart:\", error);\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Error fetching cart',\n                    text: error.message\n                });\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchCart();\n    }, [setCart]);\n\n    const handleRemoveItem = async (productId) => {\n        try {\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/cart/${productId}/remove-from-cart`, {\n                method: 'PATCH',\n                headers: {\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\n                }\n            });\n            const data = await response.json();\n            if (data.success) {\n                setCart(data.updatedCart); // Update the cart in context or state\n                Swal.fire({\n                    icon: 'success',\n                    title: 'Item removed from cart successfully',\n                });\n            } else {\n                throw new Error(data.message || 'Failed to remove item');\n            }\n        } catch (error) {\n            console.error(\"Error removing item:\", error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error removing item',\n                text: error.message\n            });\n        }\n    };\n\n    if (loading) return <div>Loading...</div>;\n\n    return (\n        <Container>\n            <h2>Your Cart</h2>\n            {cart && cart.cartItems && cart.cartItems.length > 0 ? (\n                <ListGroup>\n                    {cart.cartItems.map(item => (\n                        <ListGroup.Item key={item.productId}>\n                            <div>\n                                <strong>Product:</strong> {item.productId.name} <br />\n                                <strong>Quantity:</strong> {item.quantity} <br />\n                                <strong>Subtotal:</strong> ₱{item.subtotal.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                            </div>\n                            <Button variant=\"danger\" onClick={() => handleRemoveItem(item.productId)}>\n                                Remove\n                            </Button>\n                        </ListGroup.Item>\n                    ))}\n                </ListGroup>\n            ) : (\n                <div>Your cart is empty.</div>\n            )}\n            <h4>Total Price: ₱{cart && cart.totalPrice ? cart.totalPrice.toLocaleString(undefined, { minimumFractionDigits: 2 }) : '0.00'}</h4>\n        </Container>\n    );\n};\n\nexport default CartView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}